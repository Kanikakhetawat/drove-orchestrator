
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../specification/">
      
      
        <link rel="next" href="../outage/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Application Operations - Drove</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#application-operations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Drove" class="md-header__button md-logo" aria-label="Drove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Drove
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Application Operations
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Drove" class="md-nav__button md-logo" aria-label="Drove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Drove
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log Related APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Instances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Application Operations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Application Operations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-initiate-an-operation" class="md-nav__link">
    <span class="md-ellipsis">
      How to initiate an operation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cancel-an-operation" class="md-nav__link">
    <span class="md-ellipsis">
      How to cancel an operation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Create an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-new-instances-of-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Starting new instances of an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspending-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Suspending an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-the-application-up-or-down" class="md-nav__link">
    <span class="md-ellipsis">
      Scaling the application up or down
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restarting-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Restarting an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-or-replace-specific-instances-of-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Stop or replace specific instances of an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destroy-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Destroy an application
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../outage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outage Detection and Recovery
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cluster
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anatomy of a Drove Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-initiate-an-operation" class="md-nav__link">
    <span class="md-ellipsis">
      How to initiate an operation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cancel-an-operation" class="md-nav__link">
    <span class="md-ellipsis">
      How to cancel an operation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Create an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-new-instances-of-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Starting new instances of an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspending-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Suspending an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-the-application-up-or-down" class="md-nav__link">
    <span class="md-ellipsis">
      Scaling the application up or down
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restarting-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Restarting an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stop-or-replace-specific-instances-of-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Stop or replace specific instances of an application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#destroy-an-application" class="md-nav__link">
    <span class="md-ellipsis">
      Destroy an application
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="application-operations">Application Operations</h1>
<p>This page discusses operations relevant to Application management. Please go over the <a href="../#application-state-machine">Application State Machine</a> and <a href="../instances/#application-instance-state-machine">Application Instance State Machine</a> to understand the different states an application (and it's instances) can be in and how operations applied move an application from one state to another.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please go through <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a> to understand the operation parameters being sent.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only one operation can be active on a particular <code>{appName,version}</code> combination.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only the leader controller will accept and process operations. To avoid confusion, use the controller endpoint exposed by Drove Gateway to issue commands.</p>
</div>
<h2 id="how-to-initiate-an-operation">How to initiate an operation</h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use the <a href="https://github.com/PhonePe/drove-cli">Drove CLI</a> to perform all manual operations.</p>
</div>
<p>All operations for application lifecycle management need to be issued via a POST HTTP call to the leader controller endpoint on the path <code>/apis/v1/applications/operations</code>. API will return HTTP OK/200 and relevant json response as payload.</p>
<p>Sample api call:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--location<span class="w"> </span><span class="s1">&#39;http://drove.local:7000/apis/v1/applications/operations&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Authorization: Basic YWRtaW46YWRtaW4=&#39;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;type&quot;: &quot;START_INSTANCES&quot;,</span>
<span class="s1">    &quot;appId&quot;: &quot;TEST_APP-3&quot;,</span>
<span class="s1">    &quot;instances&quot;: 1,</span>
<span class="s1">    &quot;opSpec&quot;: {</span>
<span class="s1">        &quot;timeout&quot;: &quot;5m&quot;,</span>
<span class="s1">        &quot;parallelism&quot;: 32,</span>
<span class="s1">        &quot;failureStrategy&quot;: &quot;STOP&quot;</span>
<span class="s1">    }</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the above examples, <code>http://drove.local:7000</code> is the endpoint of the leader. <code>TEST_APP-3</code> is the <a href="../#application-id">Application ID</a>. Authorization is basic auth.</p>
</div>
<h2 id="how-to-cancel-an-operation">How to cancel an operation</h2>
<p class="annotate">Operations can be requested to be cancelled asynchronously. A POST call needs to be made to leader controller endpoint on the api <code>/apis/v1/operations/{applicationId}/cancel</code> (1) to achieve this.</p>
<ol>
<li><code>applicationId</code> is the <a href="../#application-id">Application ID</a> for the application</li>
</ol>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--location<span class="w"> </span>--request<span class="w"> </span>POST<span class="w"> </span><span class="s1">&#39;http://drove.local:7000/apis/v1/operations/TEST_APP-3/cancel&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Authorization: Basic YWRtaW46YWRtaW4=&#39;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s1">&#39;&#39;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Operation cancellation is not instantaneous. Cancellation will be affected only after current execution of the active operation is complete.</p>
</div>
<h2 id="create-an-application">Create an application</h2>
<p>Before deploying containers on the cluster, an application needs to be created.</p>
<p><strong>Preconditions:</strong></p>
<ul>
<li>App should not exist in the cluster</li>
</ul>
<p><strong>State Transition:</strong> </p>
<ul>
<li>none &#8594; <code>MONITORING</code></li>
</ul>
<p>To create an application, an <a href="../specification/">Application Spec</a> needs to be created first. </p>
<p>Once ready, CLI command needs to be issued or the following payload needs to be sent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Drove CLI</label><label for="__tabbed_1_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>create<span class="w"> </span>sample/test_app.json
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CREATE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;spec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{...},</span><span class="w"> </span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(2)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Spec as mentioned in <a href="../specification/">Application Specification</a></li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<h2 id="starting-new-instances-of-an-application">Starting new instances of an application</h2>
<p>New instances can be started by issuing the  <code>START_INSTANCES</code> command.</p>
<p><strong>Preconditions</strong>
- Application must be in one of the following states: <code>MONITORING</code>, <code>RUNNING</code></p>
<p><strong>State Transition:</strong></p>
<ul>
<li>{<code>RUNNING</code>, <code>MONITORING</code>} &#8594; <code>RUNNING</code></li>
</ul>
<p>The following command/payload will start <code>2</code> new instances of the application.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Drove CLI</label><label for="__tabbed_2_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>deploy<span class="w"> </span>TEST_APP-1<span class="w"> </span><span class="m">2</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;START_INSTANCES&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;instances&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="c1">//(2)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(3)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">32</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Application ID</li>
<li>Number of instances to be started</li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<h2 id="suspending-an-application">Suspending an application</h2>
<p>All instances of an application can be shut down by issuing the  <code>SUSPEND</code> command.</p>
<p><strong>Preconditions</strong>
- Application must be in one of the following states: <code>MONITORING</code>, <code>RUNNING</code></p>
<p><strong>State Transition:</strong></p>
<ul>
<li>{<code>RUNNING</code>, <code>MONITORING</code>} &#8594; <code>MONITORING</code></li>
</ul>
<p>The following command/payload will suspend all instances of the application.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Drove CLI</label><label for="__tabbed_3_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>TEST_APP-1
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUSPEND&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(2)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">32</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Application ID</li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<h2 id="scaling-the-application-up-or-down">Scaling the application up or down</h2>
<p>Scaling the application to required number of containers can be achieved using the <code>SCALE</code> command. Application can be either scaled up or down using this command.</p>
<p><strong>Preconditions</strong>
- Application must be in one of the following states: <code>MONITORING</code>, <code>RUNNING</code></p>
<p><strong>State Transition:</strong></p>
<ul>
<li>{<code>RUNNING</code>, <code>MONITORING</code>} &#8594; <code>MONITORING</code> if <code>requiredInstances</code> is set to 0</li>
<li>{<code>RUNNING</code>, <code>MONITORING</code>} &#8594; <code>RUNNING</code> if <code>requiredInstances</code> is non 0</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Drove CLI</label><label for="__tabbed_4_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>scale<span class="w"> </span>TEST_APP-1<span class="w"> </span><span class="m">2</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SCALE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">//(3)!</span>
<span class="w">    </span><span class="s2">&quot;requiredInstances&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(2)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;1m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Absolute number of instances to be maintained on the cluster for the application</li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
<li>Application ID</li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During scale down, older instances are stopped first</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If implementing automation on top of Drove APIs, just use the <code>SCALE</code> command to scale up or down instead of using <code>START_INSTANCES</code> or <code>SUSPEND</code> separately.</p>
</div>
<h2 id="restarting-an-application">Restarting an application</h2>
<p>Application can be restarted by issuing the <code>REPLACE_INSTANCES</code> operation. In this case, first <code>clusterOpSpec.parallelism</code> number of containers are spun up first and then an equivalent number of them are spun down. This ensures that cluster maintains enough capacity is maintained in the cluster to handle incoming traffic as the restart is underway. </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the cluster does not have sufficient capacity to spin up new containers, this operation will get stuck. So adjust your parallelism accordingly.</p>
</div>
<p><strong>Preconditions</strong>
- Application must be in <code>RUNNING</code> state.</p>
<p><strong>State Transition:</strong></p>
<ul>
<li><code>RUNNING</code> &#8594; <code>REPLACE_INSTANCES_REQUESTED</code> &#8594; <code>RUNNING</code></li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Drove CLI</label><label for="__tabbed_5_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>restart<span class="w"> </span>TEST_APP-1
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;REPLACE_INSTANCES&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;instanceIds&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="c1">//(2)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(3)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;1m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Application ID</li>
<li>Instances that need to be restarted. This is optional. If nothing is passed, all instances will be replaced.</li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To replace specific instances, pass their application instance ids (starts with <code>AI-...</code>) in the <code>instanceIds</code> parameter in the JSON payload.</p>
</div>
<h2 id="stop-or-replace-specific-instances-of-an-application">Stop or replace specific instances of an application</h2>
<p>Application instances can be killed by issuing the <code>STOP_INSTANCES</code> operation. Default behaviour of Drove is to replace killed instances by new instances. Such new instances are always spun up <em>before</em> the specified(old) instances are stopped. If <code>skipRespawn</code> parameter is set to true, the application instance is killed but <em>no new instances are spun up to replace it</em>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the cluster does not have sufficient capacity to spin up new containers, and <code>skipRespawn</code> is not set or set to <code>false</code>, this operation will get stuck.</p>
</div>
<p><strong>Preconditions</strong>
- Application must be in <code>RUNNING</code> state.</p>
<p><strong>State Transition:</strong></p>
<ul>
<li><code>RUNNING</code> &#8594; <code>STOP_INSTANCES_REQUESTED</code> &#8594; <code>RUNNING</code> if final number of instances is non zero</li>
<li><code>RUNNING</code> &#8594; <code>STOP_INSTANCES_REQUESTED</code> &#8594; <code>MONITORING</code> if final number of instances is zero</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Drove CLI</label><label for="__tabbed_6_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>appinstances<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>TEST_APP-1<span class="w"> </span>AI-601d160e-c692-4ddd-8b7f-4c09b30ed02e
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP_INSTANCES&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;instanceIds&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;AI-601d160e-c692-4ddd-8b7f-4c09b30ed02e&quot;</span><span class="w"> </span><span class="p">],</span><span class="c1">//(2)!</span>
<span class="w">    </span><span class="s2">&quot;skipRespawn&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="c1">//(3)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(4)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Application ID</li>
<li>Instance ids to be stopped</li>
<li>Do not spin up new containers to replace the stopped ones. This is set ot <code>false</code> by default.</li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<h2 id="destroy-an-application">Destroy an application</h2>
<p>To remove an application deployment (<code>appName</code>-<code>version</code> combo) the <code>DESTROY</code> command can be issued.</p>
<p><strong>Preconditions:</strong></p>
<ul>
<li>App should not exist in the cluster</li>
</ul>
<p><strong>State Transition:</strong> </p>
<ul>
<li><code>MONITORING</code> &#8594; <code>DESTROY_REQUESTED</code> &#8594; <code>DESTROYED</code> &#8594; none</li>
</ul>
<p>To create an application, an <a href="../specification/">Application Spec</a> needs to be created first. </p>
<p>Once ready, CLI command needs to be issued or the following payload needs to be sent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Drove CLI</label><label for="__tabbed_7_2">JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>drove<span class="w"> </span>-c<span class="w"> </span><span class="nb">local</span><span class="w"> </span>apps<span class="w"> </span>destroy<span class="w"> </span>TEST_APP_1
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Sample Request Payload</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;DESTROY&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;appId&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span><span class="p">,</span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;opSpec&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(2)!</span>
<span class="w">        </span><span class="s2">&quot;timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;5m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;parallelism&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;failureStrategy&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;STOP&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<ol>
<li>Spec as mentioned in <a href="../specification/">Application Specification</a></li>
<li>Operation spec as mentioned in <a href="../../cluster/operations/#cluster-operation-specification">Cluster Op Spec</a></li>
</ol>
<p><strong>Sample response</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;status&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;appId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;message&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All metadata for an app and it's instances are completely obliterated from Drove's storage once an app is destroyed</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>