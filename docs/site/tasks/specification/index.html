
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../operations/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Task Specification - Drove</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#task-specification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Drove" class="md-header__button md-logo" aria-label="Drove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Drove
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Task Specification
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Drove" class="md-nav__button md-logo" aria-label="Drove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Drove
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log Related APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apis/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Instances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/outage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outage Detection and Recovery
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cluster
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anatomy of a Drove Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Task Specification
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Task Specification
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-task-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Task Definition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executable-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Executable Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-requirements-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Requirements Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Requirements Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volume-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Volume Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Config Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-config" class="md-nav__link">
    <span class="md-ellipsis">
      Inline config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locally-loaded-config" class="md-nav__link">
    <span class="md-ellipsis">
      Locally loaded config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-fetched-config" class="md-nav__link">
    <span class="md-ellipsis">
      Controller fetched Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executor-fetched-config" class="md-nav__link">
    <span class="md-ellipsis">
      Executor fetched Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-call-specification" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Call Specification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#placement-policy-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Placement Policy Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Placement Policy Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Any Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-per-host-placement" class="md-nav__link">
    <span class="md-ellipsis">
      One Per Host Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#max-n-per-host-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Max N Per Host Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-tag-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Match Tag Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-tag-placement" class="md-nav__link">
    <span class="md-ellipsis">
      No Tag Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-policy-based-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Composite Policy Based Placement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-logger-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Local Logger configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsyslog-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Rsyslog configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Operations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-task-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Task Definition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executable-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Executable Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-requirements-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Requirements Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Requirements Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volume-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Volume Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Config Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-config" class="md-nav__link">
    <span class="md-ellipsis">
      Inline config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locally-loaded-config" class="md-nav__link">
    <span class="md-ellipsis">
      Locally loaded config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-fetched-config" class="md-nav__link">
    <span class="md-ellipsis">
      Controller fetched Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executor-fetched-config" class="md-nav__link">
    <span class="md-ellipsis">
      Executor fetched Config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-call-specification" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP Call Specification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#placement-policy-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Placement Policy Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Placement Policy Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#any-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Any Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-per-host-placement" class="md-nav__link">
    <span class="md-ellipsis">
      One Per Host Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#max-n-per-host-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Max N Per Host Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-tag-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Match Tag Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-tag-placement" class="md-nav__link">
    <span class="md-ellipsis">
      No Tag Placement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composite-policy-based-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Composite Policy Based Placement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Specification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#local-logger-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Local Logger configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsyslog-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Rsyslog configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="task-specification">Task Specification</h1>
<p>A task is defined using JSON. We use a sample configuration below to explain the options.</p>
<h2 id="sample-task-definition">Sample Task Definition</h2>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;sourceAppName&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;TEST_APP&quot;</span><span class="p">,</span><span class="c1">//(1)!</span>
<span class="w">    </span><span class="s2">&quot;taskId&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;T0012&quot;</span><span class="p">,</span><span class="c1">//(2)!</span>
<span class="w">    </span><span class="s2">&quot;executable&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(3)!</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;DOCKER&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// (4)!</span>
<span class="w">        </span><span class="s2">&quot;url&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ghcr.io/appform-io/test-task&quot;</span><span class="p">,</span><span class="c1">//(5)!</span>
<span class="w">        </span><span class="s2">&quot;dockerPullTimeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;100 seconds&quot;</span><span class="c1">//(6)!</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">     </span><span class="s2">&quot;resources&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="c1">//(7)!</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;count&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="c1">//(8)!</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MEMORY&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;sizeInMB&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">128</span><span class="c1">//(9)!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;volumes&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="c1">//(10)!</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;pathInContainer&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/data&quot;</span><span class="p">,</span><span class="c1">//(11)!</span>
<span class="w">            </span><span class="s2">&quot;pathOnHost&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/mnt/datavol&quot;</span><span class="p">,</span><span class="c1">//(12)!</span>
<span class="w">            </span><span class="s2">&quot;mode&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;READ_WRITE&quot;</span><span class="c1">//(13)!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;configs&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="c1">//(14)!</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;INLINE&quot;</span><span class="p">,</span><span class="c1">//(15)!</span>
<span class="w">            </span><span class="s2">&quot;localFilename&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/testfiles/drove.txt&quot;</span><span class="p">,</span><span class="c1">//(16)!</span>
<span class="w">            </span><span class="s2">&quot;data&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;RHJvdmUgdGVzdA==&quot;</span><span class="c1">//(17)!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;placementPolicy&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(18)!</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ANY&quot;</span><span class="c1">//(19)!</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;env&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(20)!</span>
<span class="w">        </span><span class="s2">&quot;CORES&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;8&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;tags&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//(21)!</span>
<span class="w">        </span><span class="s2">&quot;superSpecialApp&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;yes_i_am&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;say_my_name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;heisenberg&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">&quot;logging&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="c1">//(22)!</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;LOCAL&quot;</span><span class="p">,</span><span class="c1">//(23)!</span>
<span class="w">        </span><span class="s2">&quot;maxSize&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;100m&quot;</span><span class="p">,</span><span class="c1">//(24)!</span>
<span class="w">        </span><span class="s2">&quot;maxFiles&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="c1">//(25)!</span>
<span class="w">        </span><span class="s2">&quot;compress&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="c1">//(26)!</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>Name of the <code>application</code> that has started the task. Make sure this is a valid application on the cluster.</li>
<li>An unique ID for this task. Uniqueness is up to the user, Drove will scope it in the <code>sourceAppName</code> namespace.</li>
<li>Coordinates for the executable. Refer to <a href="#executable-specification">Executable Specification</a> for details.</li>
<li>Right now the only type supported is <code>DOCKER</code>.</li>
<li>Docker container address</li>
<li>Timeout for container pull.</li>
<li>Volumes to be mounted. Refer to <a href="#volume-specification">Volume Specification</a> for details.</li>
<li>Path that will be visible inside the container for this mount.</li>
<li>Actual path on the host machine for the mount.</li>
<li>Mount mode can be <code>READ_WRITE</code> and <code>READ_ONLY</code></li>
<li>Configuration to be injected as file inside the container. Please refer  <a href="#config-specification">Config Specification</a> for details.</li>
<li>Type of config. Can be <code>INLINE</code>, <code>EXECUTOR_LOCAL_FILE</code>, ONTROLLER_HTTP_FETCH<code>and</code>EXECUTOR_HTTP_FETCH`. Specifies how drove will t the contents to be injected..</li>
<li>File name for the config inside the container.</li>
<li>Serialized form of the data, this and other parameters will vary cording to the <code>type</code> specified above.</li>
<li>List of resources required to run this application. Check <a href="#resource-requirements-specification">Resource Requirements Specification</a> for more tails.</li>
<li>Number of CPU cores to be allocated.</li>
<li>Amount of memory to be allocated expressed in Megabytes</li>
<li>Specifies how the container will be placed on the cluster. Check <a href="#placement-policy-specification">Placement Policy</a> for details.</li>
<li>Type of placement can be <code>ANY</code>, <code>ONE_PER_HOST</code>, <code>MATCH_TAG</code>, <code>NO_TAG</code>, <code>RULE_BASED</code>, <code>ANY</code> and <code>COMPOSITE</code>. Rest of the parameters in this section will depend on the type.</li>
<li>Custom environment variables. Additional variables are injected by Drove  as well. See <a href="#environment-variables">Environment Variables</a> section for tails.</li>
<li>Key value metadata that can be used in external systems.</li>
<li>Specify how docker log files are configured. Refer to <a href="#logging-specification">Logging Specification</a></li>
<li>Log to local file</li>
<li>Maximum File Size</li>
<li>Number of latest log files to retain</li>
<li>Log files will be compressed</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please make sure <code>sourceAppName</code> is set to a correct application <em>name</em> as specified in the <code>name</code> parameter of a running application on the cluster.</p>
<p>If this is not done, stale task metadata <strong>will not be cleaned up</strong> and your metadata store performance will get affected over time.</p>
</div>
<h2 id="executable-specification">Executable Specification</h2>
<p>Right now Drove supports <em>only</em> docker containers. However as engines, both docker and podman are supported. Drove executors will fetch the executable directly from the registry based on the configuration provided.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set type to <code>DOCKER</code>.</td>
</tr>
<tr>
<td>URL</td>
<td><code>url</code></td>
<td>Docker container URL`.</td>
</tr>
<tr>
<td>Timeout</td>
<td><code>dockerPullTimeout</code></td>
<td>Timeout for docker image pull.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Drove supports docker registry authentication. This can be configured in the executor configuration file.</p>
</div>
<h2 id="resource-requirements-specification">Resource Requirements Specification</h2>
<p>This section specifies the hardware resources required to run the container. Right now only CPU and MEMORY are supported as resource types that can be reserved for a container.</p>
<h3 id="cpu-requirements">CPU Requirements</h3>
<p>Specifies number of cores to be assigned to the container.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set type to <code>CPU</code> for this.</td>
</tr>
<tr>
<td>Count</td>
<td><code>count</code></td>
<td>Number of cores to be assigned.</td>
</tr>
</tbody>
</table>
<h3 id="memory-requirements">Memory Requirements</h3>
<p>Specifies amount of memory to be allocated to a container.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set type to <code>MEMORY</code> for this.</td>
</tr>
<tr>
<td>Count</td>
<td><code>sizeInMB</code></td>
<td>Amount of memory (in Mega Bytes) to be allocated.</td>
</tr>
</tbody>
</table>
<p><strong>Sample</strong>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;count&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MEMORY&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;sizeInMB&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">128</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code>CPU</code> and <code>MEMORY</code> configurations are mandatory.</p>
</div>
<h2 id="volume-specification">Volume Specification</h2>
<p>Files and directories can be mounted from the executor host into the container. The <code>volumes</code> section contains a list of volumes that need to be mounted.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Path In Container</td>
<td><code>pathInContainer</code></td>
<td>Path that will be visible inside the container for this mount.</td>
</tr>
<tr>
<td>Path On Host</td>
<td><code>pathOnHost</code></td>
<td>Actual path on the host machine for the mount.</td>
</tr>
<tr>
<td>Mount Mode</td>
<td><code>mode</code></td>
<td>Mount mode can be <code>READ_WRITE</code> and <code>READ_ONLY</code> to allow the containerized process to write or read to the volume.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>We do not support mounting remote volumes as of now.</p>
</div>
<h2 id="config-specification">Config Specification</h2>
<p>Drove supports injection of configuration files into containers. The specifications for the same are discussed below.</p>
<h3 id="inline-config">Inline config</h3>
<p>Inline configuration can be added in the Application Specification itself. This will manifest as a file inside the container.</p>
<p>The following details are needed for this:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>INLINE</code></td>
</tr>
<tr>
<td>Local Filename</td>
<td><code>localFilename</code></td>
<td>File name for the config inside the container.</td>
</tr>
<tr>
<td>Data</td>
<td><code>data</code></td>
<td>Base64 encoded string for the data. The value for this will be masked on UI.</td>
</tr>
</tbody>
</table>
<p>Config file:
<div class="highlight"><pre><span></span><code><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="nt">logLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
</code></pre></div>
Corresponding config specification:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;INLINE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;localFilename&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/config/service.yml&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;cG9ydDogODA4MApsb2dMZXZlbDogREVCVUcK&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The full base 64 encoded config data will get stored in Drove ZK and will be pushed to executors inline. It is <em>not recommended</em> to stream large config files to containers using this method. This will probably need additional configuration on your ZK cluster.</p>
</div>
<h3 id="locally-loaded-config">Locally loaded config</h3>
<p>Config file from a path on the executor directly. Such files can be distributed to the executor host using existing configuration management systems such as OpenTofu, Salt etc.</p>
<p>The following details are needed for this:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>EXECUTOR_LOCAL_FILE</code></td>
</tr>
<tr>
<td>Local Filename</td>
<td><code>localFilename</code></td>
<td>File name for the config inside the container.</td>
</tr>
<tr>
<td>File path</td>
<td><code>filePathOnHost</code></td>
<td>Path to the config file on executor host.</td>
</tr>
</tbody>
</table>
<p>Sample config specification:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;EXECUTOR_LOCAL_FILE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;localFilename&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/config/service.yml&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/mnt/configs/myservice/config.yml&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="controller-fetched-config">Controller fetched Config</h3>
<p>Config file can be fetched from a remote server by the controller. Once fetched, these will be streamed to the executor as part of the instance specification for starting a container.</p>
<p>The following details are needed for this:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>CONTROLLER_HTTP_FETCH</code></td>
</tr>
<tr>
<td>Local Filename</td>
<td><code>localFilename</code></td>
<td>File name for the config inside the container.</td>
</tr>
<tr>
<td>HTTP Call Details</td>
<td><code>http</code></td>
<td>HTTP Call related details. Please refer to <a href="#http-call-specification">HTTP Call Specification</a> for details.</td>
</tr>
</tbody>
</table>
<p>Sample config specification:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;CONTROLLER_HTTP_FETCH&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;localFilename&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/config/service.yml&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;http&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;protocol&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;HTTP&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hostname&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;configserver.internal.yourdomain.net&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;port&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">8080</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;path&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/configs/myapp&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;username&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;appuser&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;password&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;secretpassword&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The controller will make an API call for every single time it asks an executor to spin up a container. Please make sure to account for this in your configuration management system.</p>
</div>
<h3 id="executor-fetched-config">Executor fetched Config</h3>
<p>Config file can be fetched from a remote server by the executor before spinning up a container. Once fetched, the payload will be injected as a config file into the container.</p>
<p>The following details are needed for this:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>EXECUTOR_HTTP_FETCH</code></td>
</tr>
<tr>
<td>Local Filename</td>
<td><code>localFilename</code></td>
<td>File name for the config inside the container.</td>
</tr>
<tr>
<td>HTTP Call Details</td>
<td><code>http</code></td>
<td>HTTP Call related details. Please refer to <a href="#http-call-specification">HTTP Call Specification</a> for details.</td>
</tr>
</tbody>
</table>
<p>Sample config specification:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;EXECUTOR_HTTP_FETCH&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;localFilename&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/config/service.yml&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;http&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">&quot;protocol&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;HTTP&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;hostname&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;configserver.internal.yourdomain.net&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;port&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">8080</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;path&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;/configs/myapp&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;username&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;appuser&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;password&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;secretpassword&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All executors will make an API call for every single time they spin up a container for this application. Please make sure to account for this in your configuration management system.</p>
</div>
<h3 id="http-call-specification">HTTP Call Specification</h3>
<p>This section details the options that can set when making http calls to a configuration management system from controllers or executors.</p>
<p>The following options are available for HTTP call:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protocol</td>
<td><code>protocol</code></td>
<td>Protocol to use for upstream call. Can be <code>HTTP</code> or <code>HTTPS</code>.</td>
</tr>
<tr>
<td>Hostname</td>
<td><code>hostname</code></td>
<td>Host to call.</td>
</tr>
<tr>
<td>Port</td>
<td><code>port</code></td>
<td>Provide custom port. Defaults to 80 for http and 443 for https.</td>
</tr>
<tr>
<td>API Path</td>
<td><code>path</code></td>
<td>Path component of the URL. Include query parameters here. Defaults to <code>/</code></td>
</tr>
<tr>
<td>HTTP Method</td>
<td><code>verb</code></td>
<td>Type of call, use <code>GET</code>, <code>POST</code> or <code>PUT</code>. Defaults to <code>GET</code>.</td>
</tr>
<tr>
<td>Success Code</td>
<td><code>successCodes</code></td>
<td>List of HTTP status codes which is considered as success. Defaults to <code>[200]</code></td>
</tr>
<tr>
<td>Payload</td>
<td><code>payload</code></td>
<td>Data to be used for POST and PUT calls</td>
</tr>
<tr>
<td>Connection Timeout</td>
<td><code>connectionTimeout</code></td>
<td>Timeout for upstream connection.</td>
</tr>
<tr>
<td>Operation timeout</td>
<td><code>operationTimeout</code></td>
<td>Timeout for actual operation.</td>
</tr>
<tr>
<td>Username</td>
<td><code>username</code></td>
<td>Username to be used basic auth. This field is masked out on the UI.</td>
</tr>
<tr>
<td>Password</td>
<td><code>password</code></td>
<td>Password to be used for basic auth. This field is masked on the UI.</td>
</tr>
<tr>
<td>Authorization Header</td>
<td><code>authHeader</code></td>
<td>Data to be passed in HTTP <code>Authorization</code> header. This field is masked on the UI.</td>
</tr>
<tr>
<td>Additional Headers</td>
<td><code>headers</code></td>
<td string="string" string_="string,">Any other headers to be passed to the upstream in the HTTP calls. This is a map of</td>
</tr>
<tr>
<td>Skip SSL Checks</td>
<td><code>insecure</code></td>
<td>Skip hostname and certification checks during SSL handshake with the upstream.</td>
</tr>
</tbody>
</table>
<h2 id="placement-policy-specification">Placement Policy Specification</h2>
<p>Placement policy governs how Drove deploys containers on the cluster. The following sections discuss the different placement policies available and how they can be configured to achieve optimal placement of containers.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All policies will work only at a <code>{appName, version}</code> combination level. They will <strong><em>not</em></strong> ensure constraints at an <code>appName</code> level. This means that for somethinge like a one per node placement, for the same <code>appName</code>, multiple containers can run on the same host if multiple deployments with different <code>version</code>s are active in a cluster. Same applies for all policies like N per host and so on.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Important details about executor tagging</p>
<ul>
<li>All hosts have at-least one tag, it's own hostname.</li>
<li>The <code>TAG</code> policy <em>will</em> consider them as valid tags. This can be used to place containers on <em>specific</em> hosts if needed.</li>
<li>This is handled specially in <em>all</em> other policy types and they will consider executors having only the hostname tag as untagged.</li>
<li>A host with a tag (other than host) will not have <em>any</em> containers running if not placed on them specifically using the <code>MATCH_TAG</code> policy</li>
</ul>
</div>
<h3 id="any-placement">Any Placement</h3>
<p>Containers for a <code>{appName, version}</code> combination can run on any un-tagged executor host.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>ANY</code> as policy.</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ANY&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For <em>most</em> use-cases this is the placement policy to use.</p>
</div>
<h3 id="one-per-host-placement">One Per Host Placement</h3>
<p>Ensures that <em>only</em> one container for a particular <code>{appName, version}</code> combination is running on an executor host at a time.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>ONE_PER_HOST</code> as policy.</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ONE_PER_HOST&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="max-n-per-host-placement">Max N Per Host Placement</h3>
<p>Ensures that at most N containers for a <code>{appName, version}</code> combination is running on an executor host at a time.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>MAX_N_PER_HOST</code> as policy.</td>
</tr>
<tr>
<td>Max count</td>
<td><code>max</code></td>
<td>The maximum num of containers that can run on an executor. Range: 1-64</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MAX_N_PER_HOST&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;max&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="match-tag-placement">Match Tag Placement</h3>
<p>Ensures that containers for a <code>{appName, version}</code> combination are running on an executor host that has the tags as mentioned in the policy.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>MATCH_TAG</code> as policy.</td>
</tr>
<tr>
<td>Max count</td>
<td><code>tag</code></td>
<td>The tag to match.</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MATCH_TAG&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;tag&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;gpu_enabled&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="no-tag-placement">No Tag Placement</h3>
<p>Ensures that containers for a <code>{appName, version}</code> combination are running on an executor host that has no tags.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>NO_TAG</code> as policy.</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;NO_TAG&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The NO_TAG policy is mostly for internal use, and does not need to be specified when deploying containers that do not need any special placement logic.</p>
</div>
<h3 id="composite-policy-based-placement">Composite Policy Based Placement</h3>
<p>Composite policy can be used to combine policies together to create complicated placement requirements.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Type</td>
<td><code>type</code></td>
<td>Put <code>COMPOSITE</code> as policy.</td>
</tr>
<tr>
<td>Polices</td>
<td><code>policies</code></td>
<td>List of policies to combine</td>
</tr>
<tr>
<td>Combiner</td>
<td><code>combiner</code></td>
<td>Can be <code>AND</code> and <code>OR</code> and signify all-match and any-match logic on the <code>policies</code> mentioned.</td>
</tr>
</tbody>
</table>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;COMPOSITE&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;policies&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;ONE_PER_HOST&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;MATH_TAG&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;tag&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;gpu_enabled&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">&quot;combiner&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;AND&quot;</span>
<span class="p">}</span>
</code></pre></div>
The above policy will ensure that <em>only</em> one container of the relevant <code>{appName,version}</code> will run on GPU enabled machines.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is easy to go into situations where no executors match complicated placement policies. Internally, we tend to keep things rather simple and use the ANY placement for most cases and <em>maybe</em> tags in a few places with over-provisioning or for hosts having special hardware <img alt="🙂" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f642.svg" title=":slight_smile:" /></p>
</div>
<h2 id="environment-variables">Environment variables</h2>
<p>This config can be used to inject custom environment variables to containers. The values are defined as part of deployment specification, are same across the cluster and immutable to modifications from inside the container (ie any overrides from inside the container will not be visible across the cluster).</p>
<p><strong>Sample:</strong>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;MY_VARIABLE_1&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;fizz&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;MY_VARIABLE_2&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;buzz&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p>The following environment variables are injected by Drove to all containers:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>HOST</td>
<td>Hostname where the container is running. This is for marathon compatibility.</td>
</tr>
<tr>
<td>PORT_<code>PORT_NUMBER</code></td>
<td>A variable for every port specified in <code>exposedPorts</code> section. The value is the actual port on the host, the specified port is mapped to.  For example if ports 8080 and 8081 are specified, two variables called <code>PORT_8080</code> and <code>PORT_8081</code> will be injected.</td>
</tr>
<tr>
<td>DROVE_EXECUTOR_HOST</td>
<td>Hostname where container is running.</td>
</tr>
<tr>
<td>DROVE_CONTAINER_ID</td>
<td>Container that is deployed</td>
</tr>
<tr>
<td>DROVE_APP_NAME</td>
<td>App name as specified in the Application Specification</td>
</tr>
<tr>
<td>DROVE_INSTANCE_ID</td>
<td>Actual instance ID generated by Drove</td>
</tr>
<tr>
<td>DROVE_APP_ID</td>
<td>Application ID as generated by Drove</td>
</tr>
<tr>
<td>DROVE_APP_INSTANCE_AUTH_TOKEN</td>
<td>A JWT string generated by Drove that can be used by this container to call <code>/apis/v1/internal/...</code> apis.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Do not</strong> pass secrets using environment variables. These variables are all visible on the UI as is. Please use <a href="#config-specification">Configs</a> to inject secrets files and so on.</p>
</div>
<h2 id="logging-specification">Logging Specification</h2>
<p>Can be used to configure how container logs are managed on the system. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section affects the docker log driver. Drove will continue to stream logs to it's own logger which can be configured at executor level through the executor configuration file.</p>
</div>
<h3 id="local-logger-configuration">Local Logger configuration</h3>
<p>This is used to configure the <code>json-file</code> log driver.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>LOCAL</code></td>
</tr>
<tr>
<td>Max Size</td>
<td><code>maxSize</code></td>
<td>Maximum file size. Anything bigger than this will lead to rotation.</td>
</tr>
<tr>
<td>Max Files</td>
<td><code>maxFiles</code></td>
<td>Maximum number of logs files to keep. Range: 1-100</td>
</tr>
<tr>
<td>Compress</td>
<td><code>compress</code></td>
<td>Enable log file compression.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If <code>logging</code> section is omitted, the following configuration is applied by default:
- File size: 10m
- Number of files: 3
- Compression: on</p>
</div>
<h3 id="rsyslog-configuration">Rsyslog configuration</h3>
<p>In case suers want to stream logs to an rsyslog server, the logging configuration needs to be set to RSYSLOG mode.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td><code>type</code></td>
<td>Set the value to <code>RSYSLOG</code></td>
</tr>
<tr>
<td>Server</td>
<td><code>server</code></td>
<td>URL for the rsyslog server.</td>
</tr>
<tr>
<td>Tag Prefix</td>
<td><code>tagPrefix</code></td>
<td>Prefix to add at the start of a tag</td>
</tr>
<tr>
<td>Tag Suffix</td>
<td><code>tagSuffix</code></td>
<td>Suffix to add at the en of a tag.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default tag is the <code>DROVE_INSTANCE_ID</code>. The <code>tagPrefix</code> and <code>tagSuffix</code> will to before and after this</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>